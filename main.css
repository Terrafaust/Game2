/* main.css */

/* --- Animation Keyframes --- */
@keyframes gear-rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
@keyframes border-glow-neon {
    from { box-shadow: 0 0 5px var(--color-primary), 0 0 10px var(--color-primary), inset 0 0 3px var(--color-primary-lighter); }
    to { box-shadow: 0 0 10px var(--color-secondary), 0 0 20px var(--color-secondary), inset 0 0 3px var(--color-primary-lighter); }
}
@keyframes text-glow-rgb {
    0% { text-shadow: 0 0 4px #ff33ff; color: #ff99ff; }
    33% { text-shadow: 0 0 4px #33ffff; color: #99ffff; }
    66% { text-shadow: 0 0 4px #ffff33; color: #ffff99; }
    100% { text-shadow: 0 0 4px #ff33ff; color: #ff99ff; }
}
@keyframes glow-gold {
    from { text-shadow: 0 0 4px var(--color-secondary), 0 0 8px var(--color-secondary); filter: brightness(1.2); }
    to { text-shadow: 0 0 8px var(--color-secondary), 0 0 16px var(--color-secondary); filter: brightness(1.4); }
}

/* --- THEME DEFINITIONS --- */

/* 1. Default Theme (Modern Day) */
:root { 
    --font-main: 'Inter', sans-serif;
    --color-primary: #4F46E5; --color-primary-lighter: #6366F1;
    --color-secondary: #EC4899; --color-accent-one: #10B981; --color-accent-two: #F59E0B;
    --color-background: #F3F4F6; 
    --color-surface: #FFFFFF; --color-surface-dark: #E5E7EB; 
    --color-text-primary: #111827; --color-text-secondary: #374151;
    --color-border: #D1D5DB; --color-button-text: #FFFFFF;
    --animation-button-border: none;
    --animation-special-text: none;
}

/* 2. Modern Night Theme */
html[data-theme="modern"][data-mode="night"] {
    --color-primary: #818CF8; --color-primary-lighter: #A78BFA; --color-secondary: #F472B6;
    --color-accent-one: #34D399; --color-accent-two: #FBBF24;
    --color-background: #0F172A; --color-surface: #1E293B; --color-surface-dark: #334155;
    --color-text-primary: #E2E8F0; --color-text-secondary: #94A3B8;
    --color-border: #475569; --color-button-text: #F1F5F9;
}

/* --- NEW THEMES WITH ANIMATIONS --- */

/* NEON THEMES */
html[data-theme="neon"][data-mode="day"] {
    --color-primary: #F000B8; --color-primary-lighter: #FF69B4;
    --color-secondary: #00F0F0;
    --color-background: #F0F8FF; --color-surface: #FFFFFF; --color-surface-dark: #E6E6FA;
    --color-text-primary: #2C003E; --color-text-secondary: #5A007D;
    --color-border: #DDA0DD; --color-button-text: #FFFFFF;
    --animation-button-border: border-glow-neon 1.5s infinite alternate;
}
html[data-theme="neon"][data-mode="night"] {
    --color-primary: #FF00FF; --color-primary-lighter: #FF77FF;
    --color-secondary: #00FFFF;
    --color-background: #0D0221; --color-surface: #1D0F35; --color-surface-dark: #2A1A47;
    --color-text-primary: #F0E6FF; --color-text-secondary: #C39EFF;
    --color-border: #573A7E; --color-button-text: #FFFFFF;
    --animation-button-border: border-glow-neon 1.5s infinite alternate;
}

/* STEAMPUNK THEMES */
html[data-theme="steampunk"][data-mode="day"] {
    --color-primary: #8B4513; --color-primary-lighter: #A0522D;
    --color-secondary: #CD853F;
    --color-background: #FDF5E6; --color-surface: #FAF0E6; --color-surface-dark: #F5DEB3;
    --color-text-primary: #5A2D0C; --color-text-secondary: #6B4423;
    --color-border: #D2B48C; --color-button-text: #FFFFFF;
}
html[data-theme="steampunk"][data-mode="night"] {
    --color-primary: #CD7F32; --color-primary-lighter: #D99058;
    --color-secondary: #B8860B;
    --color-background: #3D2B1F; --color-surface: #4A3728; --color-surface-dark: #5C4033;
    --color-text-primary: #F5DEB3; --color-text-secondary: #D2B48C;
    --color-border: #805533; --color-button-text: #2C1E12;
}

/* PINK THEMES */
html[data-theme="pink"][data-mode="day"] {
    --color-primary: #FF69B4; --color-primary-lighter: #FF85C1;
    --color-secondary: #C71585;
    --color-background: #FFF0F5; --color-surface: #FFFFFF; --color-surface-dark: #FFE4E1;
    --color-text-primary: #8B008B; --color-text-secondary: #9932CC;
    --color-border: #FFC0CB; --color-button-text: #FFFFFF;
}
html[data-theme="pink"][data-mode="night"] {
    --color-primary: #FF1493; --color-primary-lighter: #FF69B4;
    --color-secondary: #DB7093;
    --color-background: #2E081B; --color-surface: #4C0F2E; --color-surface-dark: #6B1741;
    --color-text-primary: #FFE4E1; --color-text-secondary: #FFB6C1;
    --color-border: #8B008B; --color-button-text: #FFFFFF;
}

/* RED & YELLOW THEMES */
html[data-theme="red_yellow"][data-mode="day"] {
    --color-primary: #DC2626; --color-primary-lighter: #EF4444;
    --color-secondary: #F59E0B;
    --color-background: #FFFBEB; --color-surface: #FEF2F2; --color-surface-dark: #FEE2E2;
    --color-text-primary: #991B1B; --color-text-secondary: #B91C1C;
    --color-border: #FCA5A5; --color-button-text: #FFFFFF;
}
html[data-theme="red_yellow"][data-mode="night"] {
    --color-primary: #F87171; --color-primary-lighter: #FB923C;
    --color-secondary: #FBBF24; /* Golden Color */
    --color-background: #450A0A; --color-surface: #7F1D1D; --color-surface-dark: #991B1B;
    --color-text-primary: #FEE2E2; --color-text-secondary: #FCD34D;
    --color-border: #B91C1C; --color-button-text: #450A0A;
    --animation-special-text: glow-gold 2s infinite alternate;
}

/* RGB THEME */
html[data-theme="rgb"] {
    --color-primary: #ff33ff; --color-primary-lighter: #ff66ff;
    --color-secondary: #33ffff;
    --color-background: #111; --color-surface: #1a1a1a; --color-surface-dark: #2a2a2a;
    --color-text-primary: #eee; --color-text-secondary: #bbb;
    --color-border: #444; --color-button-text: #fff;
    --animation-special-text: text-glow-rgb 3s infinite linear;
}


/* --- Base Layout, Global Styles & Animation Application --- */
html {
    width: 100%; height: 100vh;
    margin: 0; padding: 0;
    font-family: var(--font-main);
    background-color: var(--color-background); 
    color: var(--color-text-primary);
    transition: background-color 0.3s ease, color 0.3s ease;
    overflow: hidden; 
}

body { 
    width: 100%; height: 100%; 
    margin: 0; padding: 0;
    display: flex; flex-direction: column;
    overflow: hidden;
    position: relative;
}

/* --- STEAMPUNK GEAR ANIMATION --- */
html[data-theme="steampunk"] body::before,
html[data-theme="steampunk"] body::after {
    content: '';
    position: fixed;
    width: 200px;
    height: 200px;
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" fill="%23CD7F32" fill-opacity="0.1"><path d="M50,1 a49,49 0 0 1 0,98 a49,49 0 0 1 0,-98 M50,15 a35,35 0 0 1 0,70 a35,35 0 0 1 0,-70 M93.3,37.5 l-11.2,0 l5.6,-9.7 l5.6,9.7 M37.5,6.7 l0,11.2 l-9.7,-5.6 l9.7,-5.6 M6.7,62.5 l11.2,0 l-5.6,9.7 l-5.6,-9.7 M62.5,93.3 l0,-11.2 l9.7,5.6 l-9.7,5.6 M82.5,17.5 l-8,8 l-3.3,-5.7 l11.3,-2.3 M17.5,17.5 l8,8 l-5.7,3.3 l-2.3,-11.3 M17.5,82.5 l8,-8 l-5.7,-3.3 l-2.3,11.3 M82.5,82.5 l-8,-8 l3.3,5.7 l-11.3,2.3"/></svg>');
    background-size: contain;
    z-index: -1;
    animation: gear-rotate 20s linear infinite;
}
html[data-theme="steampunk"] body::after {
    width: 120px;
    height: 120px;
    bottom: -40px;
    right: -30px;
    animation-duration: 15s;
    animation-direction: reverse;
}
html[data-theme="steampunk"] body::before {
    top: -50px;
    left: -60px;
}

#game-container {
    width: 100%; flex-grow: 1; display: flex;
    height: 100vh;
}

#content-pusher {
    flex-grow: 1;
    margin-left: 240px; /* from --main-nav-width */
    transition: margin-left 0.3s ease;
    height: 100vh; 
    display: flex; 
}

body.menu-hidden #content-pusher {
    margin-left: 0;
}

.content-wrapper { 
    width: 100%; max-width: 72rem; margin: auto; padding: 1rem; 
    display: flex; flex-direction: column; flex-grow: 1;
}

header#resource-bar { flex-shrink: 0; z-index: 10; }
main { flex-grow: 1; min-height: 0; }
footer { flex-shrink: 0; z-index: 10; border-top: 1px solid var(--color-border); }

#main-content {
    background-color: var(--color-surface); 
    border: 1px solid var(--color-border);
    color: var(--color-text-primary);
    height: 100%; overflow-y: auto; border-radius: 0.75rem; padding: 1.5rem;
}

/* Broad transitions for most elements */
#game-container *, .modal-content, .tooltip {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease, text-shadow 0.3s ease;
}
h1, h2, h3, h4, h5, h6, p, span, li, label { transition: color 0.3s ease; }

/* Button Styling & Animations */
.game-button { 
    background-color: var(--color-primary); color: var(--color-button-text); 
    padding: 0.6rem 1.2rem; border-radius: 9999px;
    font-weight: 500; cursor: pointer; border: 1px solid transparent; 
    animation: var(--animation-button-border, none); /* Apply animation variable */
}
.game-button:hover { filter: brightness(1.15); box-shadow: 0 3px 5px -1px rgba(0,0,0,0.07); }
.game-button:active { transform: scale(0.97); }
.game-button:disabled { background-color: var(--color-text-secondary) !important; color: var(--color-surface-dark) !important; filter: grayscale(80%) opacity(0.7); cursor: not-allowed; animation: none !important; }

/* Special Text Animations */
html[data-theme="red_yellow"][data-mode="night"] .resource-item-display .font-semibold,
html[data-theme="red_yellow"][data-mode="night"] #resources-display [id$="-amount"] {
    animation: var(--animation-special-text);
}
html[data-theme="rgb"] h2, html[data-theme="rgb"] h3, html[data-theme="rgb"] .menu-tab.active {
    animation: var(--animation-special-text);
}


/* Fixed Left Navigation Menu */
#main-menu {
    position: fixed; top: 0; left: 0; width: 240px; height: 100vh;
    background-color: var(--color-surface); border-right: 1px solid var(--color-border);
    padding: 1.5rem 1rem; overflow-y: auto; z-index: 100;
    transition: transform 0.3s ease, opacity 0.3s ease;
    transform: translateX(0); opacity: 1;
}
body.menu-hidden #main-menu { transform: translateX(-100%); opacity: 0; pointer-events: none; }
.menu-tab {
    display: block; width: 100%; padding: 0.75rem 1.25rem; text-align: left; font-weight: 500;
    color: var(--color-text-secondary); background-color: transparent;
    border: 1px solid transparent; border-radius: 0.75rem; cursor: pointer; margin-bottom: 0.5rem;
}
.menu-tab:hover { background-color: var(--color-surface-dark); color: var(--color-primary); }
.menu-tab.active { background-color: var(--color-primary); color: var(--color-button-text); border-color: var(--color-primary-lighter); font-weight: 600; }

/* Other Component Styles */
#resource-bar h2 { color: var(--color-primary); }
#resources-display { display: flex; flex-wrap: wrap; align-items: center; gap: 1.5rem; }
.resource-item-display .font-semibold { color: var(--color-secondary) !important; }
.modal-content { background-color: var(--color-surface); color: var(--color-text-primary); border: 1px solid var(--color-border); padding: 1.5rem; border-radius: 1rem; box-shadow: 0 15px 20px -5px rgba(0,0,0,0.07); width: 90%; max-width: 32rem; z-index: 10001; }
select, input, textarea { background-color: var(--color-surface-dark); color: var(--color-text-primary); border: 1px solid var(--color-border); padding: 0.5rem 0.75rem; border-radius: 0.5rem; }
select:focus, input:focus, textarea:focus { border-color: var(--color-primary); outline: none; box-shadow: 0 0 0 3px hsla(var(--hue-cycle, 220), 80%, 70%, 0.4); }

