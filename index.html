<!DOCTYPE html>
<html lang="en" data-theme="modern" data-mode="day">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Incremental Game</title>
    <link rel="stylesheet" href="main.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                    colors: { 
                        tw_primary_base: '#4F46E5', tw_secondary_base: '#EC4899',
                        tw_accentOne_base: '#10B981', tw_accentTwo_base: '#F59E0B',
                        tw_background_base: '#111827', tw_surface_base: '#1F2937',
                        tw_surfaceDark_base: '#374151', tw_textPrimary_base: '#F3F4F6',
                        tw_textSecondary_base: '#9CA3AF',
                    },
                    borderRadius: { 'md': '0.375rem', 'lg': '0.5rem', 'xl': '0.75rem', '2xl': '1rem' } // Added 'md'
                }
            }
        };
    </script>
    <style>
        /* Base keyframes */
        @keyframes rgb-cycle-filter { 0% { filter: hue-rotate(0deg) saturate(1.5) brightness(1.1); } 100% { filter: hue-rotate(360deg) saturate(1.5) brightness(1.1); } }
        @keyframes rgb-led-glow-text { /* ... (no change from previous working version) ... */ }
        @keyframes rgb-led-glow-border { /* ... (no change from previous working version) ... */ }
        @keyframes hue-rotate-anim { 0% { --hue-cycle: 0; } 100% { --hue-cycle: 360; } }

        /* CSS Variables for Theming (ensure these are robust) */
        :root { 
            --font-main: 'Inter', sans-serif;
            --color-primary: #4F46E5; --color-primary-lighter: #6366F1; --color-primary-darker: #4338CA;
            --color-secondary: #EC4899; --color-secondary-lighter: #F472B6; --color-secondary-darker: #DB2777;
            --color-accent-one: #10B981; --color-accent-one-lighter: #34D399; --color-accent-one-darker: #059669;
            --color-accent-two: #F59E0B; --color-accent-two-lighter: #FBBF24; --color-accent-two-darker: #D97706;
            
            --color-background: #F3F4F6; /* Light mode background */
            --color-surface: #FFFFFF;    /* Light mode surface (cards, sections) */
            --color-surface-dark: #E5E7EB; /* Light mode slightly darker surface (inputs, some buttons) */
            --color-text-primary: #111827; /* Light mode main text */
            --color-text-secondary: #4B5563;/* Light mode secondary text */
            --color-border: #D1D5DB;     /* Light mode border */
            --color-button-text: #FFFFFF; /* Default text for primary buttons */
            --color-button-text-dark: #1F2937; /* Text for light background buttons */

            --shadow-xs: 0 1px 2px 0 rgba(0,0,0,0.03);
            --shadow-sm: 0 1px 3px 0 rgba(0,0,0,0.07), 0 1px 2px -1px rgba(0,0,0,0.04);
            --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.07), 0 2px 4px -2px rgba(0,0,0,0.04);
            --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.07), 0 4px 6px -4px rgba(0,0,0,0.04);
            --shadow-xl: 0 20px 25px -5px rgba(0,0,0,0.07), 0 8px 10px -6px rgba(0,0,0,0.04);

            --border-radius-base: 0.375rem; /* Tailwind's rounded-md */
            --border-radius-lg: 0.5rem;    /* Tailwind's rounded-lg */

            --animation-rgb-filter: none; --animation-rgb-border: none; --animation-rgb-text: none; --animation-hue-rotate: none;
        }

        /* Theme definitions for html tag (ensure these are complete and correct) */
        html[data-theme="modern"][data-mode="night"] {
            --color-primary: #818CF8; --color-primary-lighter: #A78BFA; --color-primary-darker: #6D28D9;
            --color-secondary: #F472B6; --color-secondary-lighter: #F9A8D4; --color-secondary-darker: #DB2777;
            --color-accent-one: #34D399; --color-accent-one-lighter: #6EE7B7; --color-accent-one-darker: #059669;
            --color-accent-two: #FBBF24; --color-accent-two-lighter: #FCD34D; --color-accent-two-darker: #D97706;
            --color-background: #111827; --color-surface: #1F2937; --color-surface-dark: #374151;
            --color-text-primary: #F3F4F6; --color-text-secondary: #9CA3AF;
            --color-border: #4B5563; --color-button-text: #F3F4F6;
            --color-button-text-dark: #F3F4F6; /* Text for dark buttons can be light */
        }
        html[data-theme="neon"][data-mode="day"] { /* ... filled in ... */ }
        html[data-theme="neon"][data-mode="night"] { /* ... filled in ... */ }
        html[data-theme="steampunk"][data-mode="day"] { /* ... filled in ... */ }
        html[data-theme="steampunk"][data-mode="night"] { /* ... filled in ... */ }
        html[data-theme="pink"][data-mode="day"] { /* ... filled in ... */ }
        html[data-theme="pink"][data-mode="night"] { /* ... filled in ... */ }
        html[data-theme="redyellow"][data-mode="day"] { /* ... filled in ... */ }
        html[data-theme="redyellow"][data-mode="night"] { /* ... filled in ... */ }
        html[data-theme="rgb"] { --animation-hue-rotate: hue-rotate-anim 12s linear infinite alternate; }
        html[data-theme="rgb"][data-mode="day"] { /* ... filled in ... */ }
        html[data-theme="rgb"][data-mode="night"] { /* ... filled in ... */ }

        /* Global Styles & Transitions */
        html {
            width: 100%; height: 100%; margin: 0; padding: 0; font-family: var(--font-main);
            background-color: var(--color-background); color: var(--color-text-primary);
            transition: background-color 0.3s ease, color 0.3s ease; overflow-x: hidden;
        }
        body { width: 100%; min-height: 100%; margin: 0; padding: 0; display: flex; flex-direction: column; }
        #game-container {
            background-color: var(--color-background); color: var(--color-text-primary);       
            width: 100%; flex-grow: 1; display: flex; flex-direction: column;
            transition: background-color 0.3s ease, color 0.3s ease; 
        }
        .content-wrapper { 
            width: 100%; max-width: 72rem; /* Tailwind max-w-6xl */
            margin-left: auto; margin-right: auto; padding: 1rem; /* Tailwind p-4 */
            display: flex; flex-direction: column; flex-grow: 1;
            /* Updated to handle fixed menu */
            padding-left: calc(16rem + 1rem); /* Width of menu (16rem) + original padding (1rem) */
        }
        @media (max-width: 768px) { /* md breakpoint */
            .content-wrapper {
                padding-left: 1rem; /* Reset padding for mobile where menu might be overlaid or different */
                padding-top: calc(4rem + 1rem); /* Approximate height of a mobile top menu + padding */
            }
        }


        /* Broad transitions for themed elements */
        #game-container *, .modal-content, .tooltip, .module-card, .menu-tab,
        #resources-display > div, select, input, textarea, button, h1, h2, h3, h4, h5, h6, p, span, li, label {
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease, text-shadow 0.3s ease;
        }

        /* --- Modernized Buttons --- */
        .game-button, .menu-tab { /* Apply modern style to both general buttons and menu tabs */
            padding: 0.65rem 1.3rem; /* Slightly more padding */
            border-radius: var(--border-radius-base); /* Standardized border radius */
            font-weight: 500; /* Medium font weight */
            text-align: center;
            cursor: pointer;
            border: 1px solid transparent;
            box-shadow: var(--shadow-xs);
            letter-spacing: 0.025em; /* Subtle letter spacing */
            transition: background-color 0.2s ease, transform 0.15s ease, box-shadow 0.2s ease, color 0.2s ease;
        }
        .game-button:hover, .menu-tab:hover {
            box-shadow: var(--shadow-md);
            filter: brightness(1.1); /* Slightly brighter */
        }
        .game-button:active, .menu-tab:active {
            transform: translateY(1px) scale(0.98); /* Subtle press effect */
            box-shadow: var(--shadow-xs);
        }
        .game-button:disabled, .menu-tab:disabled { /* Ensure menu tabs can also be disabled visually */
            background-color: var(--color-surface-dark) !important; 
            color: var(--color-text-secondary) !important;
            opacity: 0.6;
            cursor: not-allowed;
            box-shadow: none !important;
            filter: grayscale(50%);
            transform: none !important;
        }

        /* Specific Button Colors (using CSS Variables) */
        .game-button { /* Default button appearance */
            background-color: var(--color-primary);
            color: var(--color-button-text);
        }
         html[data-theme="rgb"] .game-button { animation: var(--animation-rgb-filter) forwards; }
        
        #save-button { background-color: var(--color-accent-one); color: var(--color-button-text); }
        #load-button { background-color: var(--color-primary); /* Or a distinct color like accent-two */ color: var(--color-button-text); }
        #reset-button { background-color: var(--color-secondary); color: var(--color-button-text); }
        #dev-tools-button { background-color: var(--color-accent-one); filter: saturate(1.5); color: var(--color-button-text); }

        /* --- Fixed Left Menu --- */
        #main-menu-container { /* New wrapper for the nav */
            position: fixed;
            left: 0;
            top: 0; /* Start from very top */
            width: 16rem; /* Tailwind w-64 */
            height: 100vh; /* Full viewport height */
            background-color: var(--color-surface); /* Themed background for the menu panel */
            padding: 1.5rem 1rem; /* Tailwind p-6 px-4 */
            box-shadow: var(--shadow-lg); /* Give it some depth */
            z-index: 40; /* Below sticky resource bar (z-50) if they could overlap, above page content */
            overflow-y: auto; /* Allow scrolling if menu items exceed height */
            display: flex;
            flex-direction: column;
        }
        #menu-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem; /* Increased gap between menu buttons (Tailwind gap-3) */
        }
        .menu-tab { /* Inherits modern button style */
            width: 100%;
            text-align: left;
            background-color: var(--color-surface-dark); /* Default state */
            color: var(--color-text-secondary);
            border-color: var(--color-border);
        }
        .menu-tab:hover {
            background-color: var(--color-surface);
            color: var(--color-primary);
            border-color: var(--color-primary);
        }
        .menu-tab.active {
            background-color: var(--color-primary);
            color: var(--color-button-text);
            border-color: var(--color-primary-lighter);
            font-weight: 600; /* Slightly bolder for active */
        }
        /* Responsive: Hide fixed menu on small screens, or transform to top bar */
        @media (max-width: 768px) { /* md breakpoint */
            #main-menu-container {
                width: 100%;
                height: auto; /* Auto height for top bar */
                flex-direction: row; /* Horizontal layout */
                overflow-x: auto; /* Allow horizontal scroll if too many items */
                overflow-y: hidden;
                padding: 0.5rem;
                box-shadow: var(--shadow-md);
                top: 0; /* Stick to top */
                /* z-index should be high if it's a top bar */
            }
            #menu-list {
                flex-direction: row; /* Horizontal menu items */
                gap: 0.5rem;
                width: 100%;
                justify-content: space-around; /* Distribute items */
            }
            .menu-tab {
                width: auto; /* Fit content */
                flex-grow: 1; /* Allow items to grow and fill space */
                text-align: center; /* Center text for top bar buttons */
                padding: 0.5rem 0.75rem; /* Smaller padding for top bar */
            }
        }


        /* Tooltip & Modal Styling (no change from previous working version) */
        .tooltip { /* ... */ }
        #modal-container { /* ... */ }
        .modal-content { /* ... */ }

        /* Resource Bar & Items (no border as requested) */
        #resource-bar { background-color: transparent; border: none !important; box-shadow: none !important; color: var(--color-text-primary); }
        #resource-bar h2 { color: var(--color-primary); }
        html[data-theme="rgb"] #resource-bar h2 { animation: var(--animation-rgb-text) forwards;}
        html[data-theme="neon"][data-mode="night"] #resource-bar h2 { animation: var(--animation-rgb-text) forwards; }
        .resource-item-display { background-color: transparent !important; color: var(--color-text-primary) !important; border: none !important; padding: 0.25rem 0.5rem; border-radius: 0; box-shadow: none !important; text-align: left; }
        .resource-item-display .font-semibold { color: var(--color-secondary) !important; }
        html[data-theme="rgb"] .resource-item-display .font-semibold {  animation: var(--animation-rgb-text) forwards; }
        
        /* Main Content Area & Footer */
        #main-content, footer { background-color: var(--color-surface); border: 1px solid var(--color-border); color: var(--color-text-primary); }
        
        /* Form Elements */
        select, input[type="text"], input[type="number"], textarea { background-color: var(--color-surface-dark); color: var(--color-text-primary); border: 1px solid var(--color-border); padding: 0.5rem 0.75rem; border-radius: var(--border-radius-base); }
        select:focus, input:focus, textarea:focus { border-color: var(--color-primary); outline: none; box-shadow: 0 0 0 3px hsla(var(--hue-cycle, 220), 80%, 70%, 0.4); }
        html[data-theme="modern"] select:focus, html[data-theme="modern"] input:focus, html[data-theme="modern"] textarea:focus { box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.4); }
        html[data-theme="neon"] select:focus, html[data-theme="neon"] input:focus, html[data-theme="neon"] textarea:focus { box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.5); }
    </style>
</head>
<body class="font-inter"> 
    <div id="game-container"> 
        <!-- Main Menu Container is now outside .content-wrapper for fixed positioning -->
        <nav id="main-menu-container">
            <ul id="menu-list">
                <!-- Menu items are generated by JS -->
            </ul>
        </nav>

        <div class="content-wrapper"> 
            <header id="resource-bar" class="mb-6 sticky top-4 z-50">
                <h2 class="text-xl font-semibold mb-2 text-center sm:text-left">Resources</h2> 
                <div id="resources-display" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-4 gap-y-1"> 
                </div>
            </header>

            <main class="flex-grow flex"> <!-- Removed md:flex-row as menu is now fixed -->
                <!-- The main-menu nav element is removed from here -->
                <section id="main-content" class="flex-grow rounded-xl p-6"> <!-- Adjusted to take full width within content-wrapper -->
                    <p>Loading game content...</p>
                </section>
            </main>

            <footer class="rounded-t-xl p-4 mt-auto text-center sticky bottom-0 z-50 flex flex-wrap justify-center items-center gap-3">
                <button id="save-button" class="game-button">Save Game</button>
                <button id="load-button" class="game-button">Load Game</button>
                <button id="reset-button" class="game-button">Hard Reset</button>
                <button id="dev-tools-button" class="game-button">Developer Tools</button>
            </footer>
        </div> 
    </div>

    <div id="modal-container"></div>
    <div id="tooltip-container" class="tooltip"></div>
    <div id="notification-area" class="fixed bottom-5 right-5 z-[10000] space-y-3 max-w-xs w-full"></div>

    <script src="js/lib/break_infinity.min.js"></script>
    <script type="module" src="js/main.js"></script>
</body>
</html>
